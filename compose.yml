name: quark-bot

services:
    nonebot:
        image: ghcr.io/fllesser/quarkbot:latest
        container_name: quark-bot-nonebot
        environment:
          PORT: 8080
          SUPERUSER: 1234567890              # è¶…çº§ç”¨æˆ·IDè·å–æ–¹å¼: [@userinfobot](https://t.me/userinfobot)
          TELEGRAM_BOT_TOKEN: bot_token      # æœºå™¨äºº token è·å–æ–¹å¼: [@BotFather](https://t.me/BotFather)
          QAS_ENDPOINT: http://quark-auto-save:5005 # è‡ªåŠ¨è½¬å­˜æœåŠ¡åœ°å€
          QAS_TOKEN: 1234567890 # å‰å¾€ quark-auto-save webui ç³»ç»Ÿé…ç½®ä¸‹æ‹‰ API å¤„è·å–
        restart: unless-stopped
        depends_on: [quark-auto-save]
        networks: [quark-bot-network]

    smartstrm:
      image: cp0204/smartstrm:latest
      container_name: smartstrm
      restart: unless-stopped
      networks: [quark-bot-network]
      ports:
        - 5006:5006
      volumes:
        - ./smartstrm/config:/app/config # æŒ‚è½½é…ç½®ç›®å½•
        - ./smartstrm/logs:/app/logs # æŒ‚è½½æ—¥å¿—ç›®å½•ï¼Œå¯é€‰
        - ./smartstrm/strm:/strm # æŒ‚è½½ STRM ç”Ÿæˆç›®å½•
      environment:
        - PORT=5006 # ç®¡ç†ç«¯å£ï¼Œå¯é€‰
        - ADMIN_USERNAME=admin # ç®¡ç†ç”¨æˆ·å
        - ADMIN_PASSWORD=password # ç®¡ç†ç”¨æˆ·å¯†ç 

    quark-auto-save:
      image: cp0204/quark-auto-save:latest
      container_name: quark-auto-save
      ports:
        - 5005:5005
      restart: unless-stopped
      networks: [quark-bot-network]
      environment:
        PORT: 5005
        WEBUI_USERNAME: "admin"
        WEBUI_PASSWORD: "password"
      volumes:
        - ./quark-auto-save/config:/app/config
        - ./quark-auto-save/media:/media

    emby:
      image: amilys/embyserver:latest
      container_name: emby
      networks: [quark-bot-network]
      ports:
        - 8096:8096
      environment:
        - TZ=Asia/Shanghai
      volumes:
        - ./emby/config:/config
        - ./smartstrm/strm:/media  # âš ï¸ å¿…é¡»åŒ¹é…SmartSTRMè¾“å‡ºè·¯å¾„
      devices:
        - /dev/dri:/dev/dri  # âœ… ç¡¬ä»¶è½¬ç æ”¯æŒ
      restart: always
      privileged: true  # ğŸ”‘ å…³é”®æƒé™

networks:
  quark-bot-network:
    name: quark-bot-network
    driver: bridge

